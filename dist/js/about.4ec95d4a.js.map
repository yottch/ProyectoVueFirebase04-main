{"version":3,"file":"js/about.4ec95d4a.js","mappings":"oMACOA,MAAM,a,GAINA,MAAM,kB,GAEJA,MAAM,oB,GACX,OAA4C,QAAtCA,MAAM,oBAAmB,UAAM,G,GAIhCA,MAAM,oB,GACX,OAA4C,QAAtCA,MAAM,oBAAmB,UAAM,G,GAGhCA,MAAM,oB,GAIJA,MAAM,Q,GAWRA,MAAM,Q,aAQNA,MAAM,S,GACX,OAQQ,eAPN,OAMK,YALH,OAAuB,MAAnBC,MAAM,OAAM,OAChB,OAA2B,MAAvBA,MAAM,OAAM,WAChB,OAA2B,MAAvBA,MAAM,OAAM,WAChB,OAA2B,MAAvBA,MAAM,OAAM,WAChB,OAA6B,MAAzBA,MAAM,OAAM,gBAAQ,G,GAKpBA,MAAM,O,iGAlDhB,QAmEM,MAnEN,EAmEM,EAlEJ,QAAS,IAGX,OAgCM,MAhCN,EAgCM,EA/BN,OA8BO,cA7BL,OAGM,MAHN,EAGM,CAFN,GAA4C,SAC5C,OAAiE,S,qCAAjD,EAAAC,QAAQC,OAAM,GAAEC,KAAK,OAAOJ,MAAM,gB,iBAAlC,EAAAE,QAAQC,aAGxB,OAGM,MAHN,EAGM,CAFN,GAA4C,SAC5C,OAAiE,S,qCAAjD,EAAAD,QAAQG,OAAM,GAAED,KAAK,OAAOJ,MAAM,gB,iBAAlC,EAAAE,QAAQG,aAExB,OAEM,MAFN,EAEM,EADJ,OAAkD,SAA3CD,KAAK,OAAQ,SAAM,eAAE,EAAAE,aAAaC,K,YAGzC,OAeI,MAfJ,EAeI,WAdN,OAIS,UAHN,QAAK,yBAAU,EAAAC,eAAe,EAAAC,KAAE,cACjCT,MAAM,mBAAkB,eAE1B,aAJgC,IAIhC,KAJqBU,WAAM,SAK3B,OAIS,UAHN,QAAK,yBAAU,EAAAC,eAAW,cAC3BX,MAAM,mBAAkB,YAE1B,aAJgC,IAIhC,KAJqBU,WAKrB,OAEM,MAFN,EAEM,EADJ,OAAuB,OAAjBE,IAAK,EAAAC,YAAU,mBAOzB,OA4BQ,QA5BR,EA4BQ,CA3BN,GASA,OAiBQ,6BAhBN,QAeK,mBAfuB,EAAAC,UAAQ,CAAxBC,EAAMC,M,WAAlB,QAeK,MAfkCC,IAAKD,GAAK,EAC/C,OAA8B,KAA9B,GAA8B,QAAZA,GAAK,IACvB,OAAwB,mBAAlBD,EAAKZ,QAAM,IACjB,OAAwB,mBAAlBY,EAAKV,QAAM,IACjB,OAIK,YAHH,OAES,UAFA,SAAK,aAAU,EAAAa,cAAeH,EAAKN,IAAE,KAAQC,QAAUS,KAAKT,MAAM,gBACzEV,MAAM,mBAAkB,UAC1B,QAGF,OAIG,YAHD,OAES,UAFA,SAAK,YAAU,EAAAoB,aAAaL,EAAKN,KAAE,aAC1CT,MAAM,kBAAiB,YACzB,Y,2DAeV,GACEqB,KAAM,QACNC,WAAY,CACVC,OAAM,KAERC,OACE,MAAO,CACLC,KAAM,KACNZ,WAAY,KACZa,MAAO,KACPhB,QAAQ,EACRiB,SAAS,EAETb,SAAU,GACVZ,QAAS,CACTC,OAAQ,GACRE,OAAQ,GACRuB,KAAM,IAGV,EACAC,QAAS,CACPC,qBACE,MAAMC,QAAsB,SAAQ,QAAW,EAAAC,GAAI,aACjDD,EAAcE,SAASC,IACvB,IAAIhC,EAAUgC,EAAIV,OAClBtB,EAAQO,GAAKyB,EAAIzB,GACjBU,KAAKL,SAASqB,KAAKjC,GACnBkC,QAAQC,IAAInC,EAAQ,GAExB,EAEA4B,mBAAoBrB,SACZ,SAAU,QAAI,EAAAuB,GAAI,WAAYvB,IACpC6B,EAAA,KAAU,IACZ,EAEAR,oBAAqBrB,GACnB,MAAM8B,GAAS,QAAI,EAAAP,GAAI,WAAYvB,GAC7B+B,QAAgB,QAAOD,GACrBC,EAAQC,UACVtB,KAAKjB,QAAUsC,EAAQhB,OACvBL,KAAKjB,QAAQO,GAAK+B,EAAQ/B,IAG1B2B,QAAQC,IAAI,2BAEpB,EAGA/B,aAAaoC,GACX,MAAMC,EAAcD,EAAME,OAAOC,MAAM,GAAGzC,KAC1C,GAAmB,eAAhBuC,GAAgD,cAAhBA,EAO/B,OAFAxB,KAAKO,MAAQ,yBACbP,KAAKM,KAAO,MALZN,KAAKM,KAAOiB,EAAME,OAAOC,MAAM,GAC/B1B,KAAKO,MAAQ,KAOb,MAAMoB,EAAS,IAAIC,WACnBD,EAAOE,cAAc7B,KAAKM,MAC1BqB,EAAOG,OAAUC,IACjB/B,KAAKN,WAAaqC,EAAEN,OAAOO,MAAK,CAEtC,EAEFrB,oBACE,IACCX,KAAKQ,SAAU,EACd,IAAIyB,EAAa,cAAmBC,YAC9BD,EAAWE,MAAM,YAAYA,MAAMnC,KAAKM,KAAKJ,MAAMkC,IAAIpC,KAAKM,MAClE,MAAM+B,QAAoBJ,EAAWE,MAAM,YAAYA,MAAMnC,KAAKM,KAAKJ,MAAMoC,uBACvE,SAAO,QAAW,EAAAzB,GAAI,YAAa,CACrC7B,OAAQgB,KAAKjB,QAAQC,OACrBE,OAAQc,KAAKjB,QAAQG,OACrBuB,KAAM4B,IAERrC,KAAKO,MAAQ,0BACbP,KAAKM,KAAO,IAQd,CANA,MAAOC,GACLU,QAAQC,IAAIX,EACd,CAAE,QAEAY,EAAA,OAAY,KACZnB,KAAKQ,SAAU,CACjB,CACF,EAGJG,uBACI,IACEX,KAAKQ,SAAU,EACf,IAAIyB,EAAa,cAAmBC,YAC9BD,EAAWE,MAAM,YAAYA,MAAMnC,KAAKM,KAAKJ,MAAMkC,IAAIpC,KAAKM,MAClE,MAAM+B,QAAoBJ,EAAWE,MAAM,YAAYA,MAAMnC,KAAKM,KAAKJ,MAAMoC,iBACvEC,GAAW,QAAI,EAAA1B,GAAI,WAAYb,KAAKjB,QAAQO,UAC5C,QAAUiD,EAAU,CACtBvD,OAAQgB,KAAKjB,QAAQC,OACrBE,OAAQc,KAAKjB,QAAQG,OACrBuB,KAAM4B,IAERrC,KAAKO,MAAQ,0BACbP,KAAKM,KAAO,IAQd,CANA,MAAOC,GACLU,QAAQC,IAAIX,EACd,CAAE,QAEAY,EAAA,OAAY,KACZnB,KAAKQ,SAAU,CACjB,CAAC,GAELgC,UACExC,KAAKyC,cACP,G,SC9LF,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://firebase9/./src/views/About.vue","webpack://firebase9/./src/views/About.vue?1393"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <Navbar/>\n      <!-- ////////// formulario Añadir ////////// -->\n    <!-- Nombre -->\n  <div class=\"container my-4\">\n  <form>  \n    <div class=\"input-group mb-3\">\n    <span class=\"input-group-text\">Nombre</span>\n    <input v-model=\"usuario.nombre\" type=\"text\" class=\"form-control\">\n    </div>\n    <!-- Correo -->\n    <div class=\"input-group mb-3\">\n    <span class=\"input-group-text\">Correo</span>\n    <input v-model=\"usuario.correo\" type=\"text\" class=\"form-control\">\n    </div>\n    <div class=\"input-group my-3\">\n      <input type=\"file\" @change=\"buscarImagen($event)\">\n    </div>\n\n      <div class=\"mt-3\">  \n    <button v-show=\"this.editar === true\" \n      @click.prevent=\"actualizarDato(id)\" \n      class=\"btn btn-primary\">\n      Actualizar\n    </button>\n    <button v-show=\"this.editar === false\" \n      @click.prevent=\"agregarDato()\" \n      class=\"btn btn-primary\">\n      Guardar\n    </button>\n    <div class=\"mt-4\">\n      <img :src=\"datoImagen\">\n    </div>\n\n    </div>\n  </form>\n  </div>\n<!-- ////////// tabla ////////// -->\n  <table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">id</th>\n        <th scope=\"col\">Nombre</th>\n        <th scope=\"col\">Correo</th>\n        <th scope=\"col\">Editar</th>\n        <th scope=\"col\">Eliminar</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(item, index) in usuarios\" :key=\"index\">\n        <th scope=\"row\">{{index}}</th>\n        <td>{{item.nombre}}</td>\n        <td>{{item.correo}}</td> \n        <td>\n          <button @click.prevent=\"obtenerDatoID( item.id );this.editar = !this.editar;\" \n            class=\"btn btn-primary\">Editar\n          </button>\n        </td>\n\n        <td>\n          <button @click.prevent=\"eliminarDato(item.id)\" \n            class=\"btn btn-danger\">Eliminar\n          </button>\n      </td>\n      </tr>\n    </tbody>\n  </table>\n  </div>\n</template>\n\n<script>\nimport Navbar from '@/components/Navbar.vue'\nimport { collection, getDocs, addDoc, deleteDoc, doc, getDoc, updateDoc  } from 'firebase/firestore/lite';\nimport { db, storage } from \"../main\";\nimport firebase from 'firebase/compat/app';\nimport router from '../router/index'\n\nexport default {\n  name: 'About',\n  components: {\n    Navbar\n  },\n  data() {\n    return {\n      file: null,\n      datoImagen: null,\n      error: null,\n      editar: false,\n      loading: false,\n\n      usuarios: [],\n      usuario: {\n      nombre: '',\n      correo: '',\n      foto: ''\n    }\n  }\n  },\n  methods: {\n    async obtenerDatos () { \n      const querySnapshot = await getDocs(collection(db, \"usuarios\"));\n        querySnapshot.forEach((doc) => {\n        let usuario = doc.data()\n        usuario.id = doc.id\n        this.usuarios.push(usuario)\n        console.log(usuario)\n      });\n    },\n    // DELETE / ELIMINAR / BORRAR\n    async eliminarDato (id){\n      await deleteDoc(doc(db, \"usuarios\", id ));\n      router.go('/')\n    },\n    // GET BY ID / OBTENER POR ID\n    async obtenerDatoID (id){\n      const docRef = doc(db, \"usuarios\", id);\n      const docSnap = await getDoc(docRef);\n          if (docSnap.exists()) {\n            this.usuario = docSnap.data()\n            this.usuario.id = docSnap.id\n            } \n            else {\n            console.log(\"¡No existe el documento!\");\n            }\n    },\n\n     // BUSCAR IMAGEN\n    buscarImagen(event){\n      const tipoArchivo = event.target.files[0].type;\n      if(tipoArchivo === 'image/jpeg' || tipoArchivo === 'image/png'){\n          this.file = event.target.files[0]\n          this.error = null\n      }\n          else{\n          this.error = 'Archivo no válido'\n          this.file = null\n          return \n          }\n          const reader = new FileReader();\n          reader.readAsDataURL(this.file);\n          reader.onload = (e) => {\n          this.datoImagen = e.target.result\n          }\n    },\n    // SUBIR IMAGEN STORAGE\n  async agregarDato(){\n    try {\n     this.loading = true\n      var storageRef = firebase.storage().ref();\n      await storageRef.child('imagenes').child(this.file.name).put(this.file)\n      const urlDescarga = await storageRef.child('imagenes').child(this.file.name).getDownloadURL()\n      await addDoc(collection(db, \"usuarios\"), {\n          nombre: this.usuario.nombre,\n          correo: this.usuario.correo,\n          foto: urlDescarga\n        })\n        this.error = 'Imagen subida con éxito'\n        this.file = null\n    } \n      catch (error) {\n        console.log(error);\n      } \n      finally {\n        router.push('/')\n        this.loading = false\n      }\n    },\n\n// MÉTODO actualizarDato\nasync actualizarDato(){\n    try {\n      this.loading = true\n      var storageRef = firebase.storage().ref();\n      await storageRef.child('imagenes').child(this.file.name).put(this.file)\n      const urlDescarga = await storageRef.child('imagenes').child(this.file.name).getDownloadURL()\n      const elemento = doc(db, \"usuarios\", this.usuario.id )\n      await updateDoc(elemento, {\n          nombre: this.usuario.nombre,\n          correo: this.usuario.correo,\n          foto: urlDescarga\n        })\n        this.error = 'Imagen subida con éxito'\n        this.file = null\n    } \n      catch (error) {\n        console.log(error);\n      } \n      finally {\n        router.push('/')\n        this.loading = false\n      }}\n  },\n  mounted() {\n    this.obtenerDatos();\n  },\n}\n\n</script>","import { render } from \"./About.vue?vue&type=template&id=2ea91890\"\nimport script from \"./About.vue?vue&type=script&lang=js\"\nexport * from \"./About.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\mauri\\\\Downloads\\\\ProyectoVueFirebase04-main\\\\ProyectoVueFirebase04-main\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","scope","usuario","nombre","type","correo","buscarImagen","$event","actualizarDato","id","editar","agregarDato","src","datoImagen","usuarios","item","index","key","obtenerDatoID","this","eliminarDato","name","components","Navbar","data","file","error","loading","foto","methods","async","querySnapshot","db","forEach","doc","push","console","log","router","docRef","docSnap","exists","event","tipoArchivo","target","files","reader","FileReader","readAsDataURL","onload","e","result","storageRef","ref","child","put","urlDescarga","getDownloadURL","elemento","mounted","obtenerDatos","__exports__","render"],"sourceRoot":""}