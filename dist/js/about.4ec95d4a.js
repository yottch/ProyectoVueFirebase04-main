"use strict";(self["webpackChunkfirebase9"]=self["webpackChunkfirebase9"]||[]).push([[443],{75:function(t,a,o){o.r(a),o.d(a,{default:function(){return E}});var i=o(252),e=o(963),r=o(577);const s={class:"container"},n={class:"container my-4"},l={class:"input-group mb-3"},u=(0,i._)("span",{class:"input-group-text"},"Nombre",-1),c={class:"input-group mb-3"},d=(0,i._)("span",{class:"input-group-text"},"Correo",-1),h={class:"input-group my-3"},m={class:"mt-3"},b={class:"mt-4"},g=["src"],p={class:"table"},f=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"id"),(0,i._)("th",{scope:"col"},"Nombre"),(0,i._)("th",{scope:"col"},"Correo"),(0,i._)("th",{scope:"col"},"Editar"),(0,i._)("th",{scope:"col"},"Eliminar")])],-1),_={scope:"row"},w=["onClick"],y=["onClick"];function v(t,a,o,v,D,k){const C=(0,i.up)("Navbar");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(C),(0,i._)("div",n,[(0,i._)("form",null,[(0,i._)("div",l,[u,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>D.usuario.nombre=t),type:"text",class:"form-control"},null,512),[[e.nr,D.usuario.nombre]])]),(0,i._)("div",c,[d,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":a[1]||(a[1]=t=>D.usuario.correo=t),type:"text",class:"form-control"},null,512),[[e.nr,D.usuario.correo]])]),(0,i._)("div",h,[(0,i._)("input",{type:"file",onChange:a[2]||(a[2]=t=>k.buscarImagen(t))},null,32)]),(0,i._)("div",m,[(0,i.wy)((0,i._)("button",{onClick:a[3]||(a[3]=(0,e.iM)((a=>k.actualizarDato(t.id)),["prevent"])),class:"btn btn-primary"}," Actualizar ",512),[[e.F8,!0===this.editar]]),(0,i.wy)((0,i._)("button",{onClick:a[4]||(a[4]=(0,e.iM)((t=>k.agregarDato()),["prevent"])),class:"btn btn-primary"}," Guardar ",512),[[e.F8,!1===this.editar]]),(0,i._)("div",b,[(0,i._)("img",{src:D.datoImagen},null,8,g)])])])]),(0,i._)("table",p,[f,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(D.usuarios,((t,a)=>((0,i.wg)(),(0,i.iD)("tr",{key:a},[(0,i._)("th",_,(0,r.zw)(a),1),(0,i._)("td",null,(0,r.zw)(t.nombre),1),(0,i._)("td",null,(0,r.zw)(t.correo),1),(0,i._)("td",null,[(0,i._)("button",{onClick:(0,e.iM)((a=>{k.obtenerDatoID(t.id),this.editar=!this.editar}),["prevent"]),class:"btn btn-primary"},"Editar ",8,w)]),(0,i._)("td",null,[(0,i._)("button",{onClick:(0,e.iM)((a=>k.eliminarDato(t.id)),["prevent"]),class:"btn btn-danger"},"Eliminar ",8,y)])])))),128))])])])}var D=o(892),k=o(857),C=o(6),I=o(902),x=o(653),U={name:"About",components:{Navbar:D.Z},data(){return{file:null,datoImagen:null,error:null,editar:!1,loading:!1,usuarios:[],usuario:{nombre:"",correo:"",foto:""}}},methods:{async obtenerDatos(){const t=await(0,k.PL)((0,k.hJ)(C.db,"usuarios"));t.forEach((t=>{let a=t.data();a.id=t.id,this.usuarios.push(a),console.log(a)}))},async eliminarDato(t){await(0,k.oe)((0,k.JU)(C.db,"usuarios",t)),x.Z.go("/")},async obtenerDatoID(t){const a=(0,k.JU)(C.db,"usuarios",t),o=await(0,k.QT)(a);o.exists()?(this.usuario=o.data(),this.usuario.id=o.id):console.log("¡No existe el documento!")},buscarImagen(t){const a=t.target.files[0].type;if("image/jpeg"!==a&&"image/png"!==a)return this.error="Archivo no válido",void(this.file=null);this.file=t.target.files[0],this.error=null;const o=new FileReader;o.readAsDataURL(this.file),o.onload=t=>{this.datoImagen=t.target.result}},async agregarDato(){try{this.loading=!0;var t=I.Z.storage().ref();await t.child("imagenes").child(this.file.name).put(this.file);const a=await t.child("imagenes").child(this.file.name).getDownloadURL();await(0,k.ET)((0,k.hJ)(C.db,"usuarios"),{nombre:this.usuario.nombre,correo:this.usuario.correo,foto:a}),this.error="Imagen subida con éxito",this.file=null}catch(a){console.log(a)}finally{x.Z.push("/"),this.loading=!1}},async actualizarDato(){try{this.loading=!0;var t=I.Z.storage().ref();await t.child("imagenes").child(this.file.name).put(this.file);const a=await t.child("imagenes").child(this.file.name).getDownloadURL(),o=(0,k.JU)(C.db,"usuarios",this.usuario.id);await(0,k.r7)(o,{nombre:this.usuario.nombre,correo:this.usuario.correo,foto:a}),this.error="Imagen subida con éxito",this.file=null}catch(a){console.log(a)}finally{x.Z.push("/"),this.loading=!1}}},mounted(){this.obtenerDatos()}},Z=o(744);const z=(0,Z.Z)(U,[["render",v]]);var E=z}}]);
//# sourceMappingURL=about.4ec95d4a.js.map